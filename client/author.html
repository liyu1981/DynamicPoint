<template name="author">
<div class="container">
  <div class="row">
    <br>
    {{> authorNavbar}}

    {{#if isEmpty slides}}
    {{else}}
      {{> authorToolbar}}
    {{/if}}

    <div class="row dp-deck sortable">
      {{#each indexedSlides}}
        {{> authorSlide}}
      {{/each}}
    </div>

  </div>
</div>
</template>

<template name="authorNavbar">
<nav class="navbar navbar-default" role="navigation">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <a class="navbar-brand dp-brand" href="#" title="DynamicPoint">
        <span class="fa-stack fa-lg">
          <i class="fa fa-laptop fa-stack-2x"></i>
          <i class="fa fa-child fa-stack-1x"></i>
        </span>
      </a>
    </div>

    <div class="collapse navbar-collapse">
      <form class="navbar-form navbar-left">
        {{#if isEmpty slides}}
        <button type="button" class="btn btn-primary" id="newDeckBtn"><i class="fa fa-file-o"></i> New Deck</button>
        {{else}}
        <label>Title</label> <input type="text" class="form-control dp-title" value="{{ title }}" />
        {{/if}}
      </form>
      <ul class="nav navbar-nav navbar-right dp-navbar-right-most">
        <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="glyphicon glyphicon-align-justify"></span></a>
        <ul class="dropdown-menu" role="menu">
          <li><a href="/user?id="><span class="glyphicon glyphicon-user"></span> </a></li>
          <li class="divider"></li>
          {{#if isEmpty slides}}
          {{else}}
          <li><a href="/qrcode?id={{ _id }}" target="_blank"><span class="glyphicon glyphicon-qrcode"></span> QR Codes</a></li>
          <li class="divider"></li>
          <li><a href="/export?id={{ _id }}" target="_blank"><span class="glyphicon glyphicon-floppy-save"></span> Export To File</a></li>
          {{/if}}
          <li><a href="#" id="importMenu"><span class="glyphicon glyphicon-floppy-open"></span> Import From File</a>
          <form class="hidden"><input type="file" id="importMenuFileSelector" /></form>
          </li>
          <li class="divider"></li>
          <li><a href="https://github.com/liyu1981/DynamicPoint" target="_blank"><i class="fa fa-github-square"></i> Fork me on Github!</a></li>
        </ul>
        </li>
      </ul>
      <form class="navbar-form navbar-right">
        <div class="form-group">
          <span id="dpActionInfo" class="hidden dp-action-info">saving...</span><button type="button" class="btn btn-success" id="saveBtn"><i class="fa fa-save"></i></button>
        </div>
      </form>
    </div>
  </div>
</nav>
</template>

<template name="authorToolbar">
<nav class="navbar navbar-default dp-toolbar">
  <div class="collapse navbar-collapse navbar-ex1-collapse">
    <ul class="nav navbar-nav">
      <li><a href="#" id="newSlideBtn" title="New Slide"><i class="fa fa-plus-circle fa-2x"></i></a></li>
      <li><a href="#" id="sortToggle" title="Toogle Drag&Drop Sort"><i class="fa fa-arrows fa-2x"></i></a></li>
      <li><a href="#" id="insertCodeBlockBtn" title="Insert Code Block"><i class="fa fa-code fa-2x"></i></a></li>
      <li><a href="#" id="insertImageBtn" title="Insert Image"><i class="fa fa-image fa-2x"></i></a></li>
      <li><a href="#" id="insertMediaBtn" title="Insert Media"><i class="fa fa-youtube-play fa-2x"></i></a></li>
    </ul>
  </div>
</nav>
</template>

<template name="authorSlide">
<div class="col-md-6 slide" slideId="{{ id }}" slideIndex="{{ index }}">
  <div class="panel panel-default dp-panel">
    <div class="panel-heading slide-handle">
      <div class="btn-group pull-right">
        <button class="btn btn-default" id="deleteThisSlide" title="Delete This Slide"><i class="fa fa-trash-o"></i></button>
        <button class="btn btn-default" id="duplicateThisSlide" title="Duplicate This Slide"><i class="fa fa-copy"></i></button>
      </div>
      <div>
        <div class="btn-group">
          <button type="button" class="btn btn-default" disabled>{{ index }}</button>
          <div class="btn-group">
            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"><i class="fa fa-toggle-on"></i> {{ type }} <span class="caret"></span></button>
            <ul class="dropdown-menu" role="menu">
              {{#each allSlideTypes}}
              <li><a class="change-slide-type-btn" href="#" id="{{id}}"><i class="fa fa-toggle-off"></i> {{ displayName }}</a></li>
              {{/each}}
            </ul>
          </div>
        </div>
      </div>
    </div>
    <div class="panel-body">
    {{> Template.dynamic template=calcSlideTemplate}}
    </div>
  </div>
</div>
</template>

<template name="author-slide-normal">
{{{authorContent}}}
</template>
