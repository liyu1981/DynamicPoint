<template name="author">
<div class="container">
  <div class="row">
    {{> authorNavbar}}

    {{#if isEmpty slides}}
    {{else}}
      {{> authorToolbar}}
    {{/if}}

    <div class="row dp-deck">
      <div class="col-md-12 dp-thumbnail dp-sortable" style="display: none;">
      {{#each indexedSlides}}
      {{> authorThumbnail}}
      {{/each}}
      </div>

      {{#each indexedSlides}}
        {{> authorSlide}}
      {{/each}}
    </div>

  </div>
  {{> dpFooter}}
</div>
</template>

<template name="authorNavbar">
<nav class="navbar navbar-default dp-navbar" role="navigation">
  <div class="container-fluid">
    {{> dpNavbarDPLogo}}

    <div class="collapse navbar-collapse">
      <form class="navbar-form navbar-left dp-author-navbar">
        <div class="input-group">
          <div class="input-group-addon"><strong>Title</strong></div>
          <input id="titleInput" type="text" class="form-control dp-title" value="{{title}}" />
        </div>
      </form>
      <ul class="nav navbar-nav navbar-right dp-navbar-menu">
        <li class="dropdown">
        {{> dpNavbarDropdownToogle}}
        <ul class="dropdown-menu" role="menu">
          {{> dpNavbarDropdownLogout}}
          <li><a href="#" id="newDeckBtn"><i class="fa fa-file-o"></i> New Deck</a></li>
          <li class="divider"></li>
          {{#if isEmpty slides}}
          {{else}}
          <li><a href="/qrcode?id={{_id}}" target="_blank"><i class="fa fa-qrcode"></i> QR Codes</a></li>
          <li class="divider"></li>
          <li><a href="/export?id={{_id}}" target="_blank"><i class="fa fa-cloud-download"></i> Export To File</a></li>
          {{/if}}
          {{> dpNavbarDropdownImportFromFile}}
          {{> dpNavbarDropdownAbout}}
        </ul>
        </li>
      </ul>
      <form class="navbar-form navbar-right">
        <div class="form-group">
          <span id="dpActionInfo" class="dp-action-info">{{dpActionInfo}}</span>
          <button type="button" class="btn btn-success" id="saveBtn"><i class="fa fa-save"></i></button>
        </div>
      </form>
    </div>
  </div>
</nav>
</template>

<template name="authorToolbar">
<nav class="navbar navbar-default dp-toolbar">
  <div class="dplogo-block" style="display: none;">
    {{> dpNavbarDPLogo}}
    <hr>
  </div>
  <div class="collapse navbar-collapse">
    <ul class="nav navbar-nav">
      <li><a href="#" id="newSlideToggle" title="New Slide" data-target="#newSlideLayouts" data-placement="right right-top" data-backdrop="true"><i class="fa fa-plus-circle fa-2x"></i></a></li>
      <li><a href="#" id="sortToggle" title="Start Drag&Drop Sort"><i class="fa fa-th fa-2x"></i></a></li>
    </ul>
    <div id="newSlideLayouts" class="popover popover-default popover-lg fade">
      <div class="arrow"></div>
      <div class="popover-title"><strong>Choose The Page Layout</strong></div>
      <div class="popover-content dp-slide-layout-thumb-container">
        {{#each slideLayouts}}
        <div class="dp-slide-layout-thumb">
          <div class="dp-slide-layout-thumb-content reveal">
            <div class="slides" style="width: 960px; height: 700px;">
              {{{content}}}
            </div>
          </div>
        </div>
        {{/each}}
      </div>
      <div class="popover-footer"></div>
    </div>
  </div>
  <div class="collapse navbar-collapse dp-navbar-authortool">
    <ul class="nav navbar-nav">
      {{> Template.dynamic template=calcSlideTemplateAuthorTool}}
    </ul>
  </div>
</nav>
</template>

<template name="authorThumbnail">
<div class="col-md-3 thumb sortable-block" slideId="{{id}}" slideIndex="{{index}}">
  <div class="panel panel-default">
    <div class="panel-heading sortable-handle">
      <center><strong>{{index}}</strong> - <strong>{{type}}</strong></center>
    </div>
    <div class="panel-body content-center" style="height: 160px;">
      {{{thumbContent}}}
    </div>
  </div>
</div>
</template>

<template name="authorSlide">
<div class="col-md-12 slide" slideId="{{id}}" slideIndex="{{index}}" slideType="{{type}}">
  <div class="panel panel-default dp-panel">
    <div class="panel-heading slide-handle">
      <div class="btn-group pull-right">
        {{> Template.dynamic template=calcSlideTemplateToolBar}}
        <button class="btn btn-default" id="deleteThisSlide" title="Delete This Slide"><i class="fa fa-trash-o"></i></button>
        <button class="btn btn-default" id="duplicateThisSlide" title="Duplicate This Slide"><i class="fa fa-copy"></i></button>
      </div>
      <div>
        <div class="btn-group">
          <button type="button" class="btn btn-default">{{index}}</button>
          <div class="btn-group">
            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"><i class="fa fa-check-square-o"></i> {{displayType}} <span class="caret"></span></button>
            <ul class="dropdown-menu" role="menu">
              {{#each allSlideTypes}}
              <li class="dp-hover-checked"><a class="change-slide-type-btn" href="#" id="{{id}}"><i class="fa fa-square-o"></i> {{displayName}}</a></li>
              {{/each}}
            </ul>
          </div>
        </div>
      </div>
    </div>
    <div class="panel-body">
    {{> Template.dynamic template=calcSlideTemplate}}
    </div>
  </div>
</div>
</template>
